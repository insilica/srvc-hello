db: "sink.jsonl"
#db: "http://localhost:8090"

reviewer: mailto:user@example.com

labels:
  acute_tox:
    type: boolean
    question: Acute toxicity?
  annotation:
    type: annotation
    question: Annotation
  eye_irrit:
    type: boolean
    question: Eye irritation?
  substance:
    type: categorical
    categories:
      - sodium laureth sulfate
      - sodium lauryl sulfoacetate
      - sodium cocoyl glycinate
      - disodium cocoyl glutamate
      - decyl glucoside
      - lauryl glucoside
    inclusion_values:
      - sodium laureth sulfate
      - sodium lauryl sulfoacetate
      - sodium cocoyl glycinate
      - disodium cocoyl glutamate
      - decyl glucoside
      - lauryl glucoside
    question: Substance

flows:
  simple:
    steps:
      - run: "gen/gen.clj"

      - run: "map/remove-reviewed.clj"
      
      - run: "map/map.clj"
        labels:
          - substance
          - acute_tox
          - eye_irrit

  annotate: # would be nice to demo shiny-map.R here
    steps:
      - run: "gen/gen.clj"

      - run: "map/remove-reviewed.clj"
      
      - run: "map/shiny-map.R"
        image: "insilica/biobricks:1.0"
        #port: 3333  
        labels:
          - annotation

  jupyter:
    steps:
      - run: "gen/gen.clj"

      - run: "map/remove-reviewed.clj"

      - run: "map/jupyter.clj"
        labels:
          - acute_tox
          - eye_irrit
